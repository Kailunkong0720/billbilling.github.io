<!DOCTYPE html>
<html>
<head>
    <title>可选择日期的行事曆</title>
    <style>     
    </style>
    <link rel="stylesheet" href="sucess.css">
    <script href="sucess.js"></script>
</head>
<body>
    <h1></h1>

<div class="main-container-wrapper">
<header>
    <button class="header__btn header__btn--left" title="Menu">
      <svg class="icon" width="20px" viewBox="0 0 20 16" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path fill="#fff" d="M0 0h20v2H0zM0 7h20v2H0zM0 14h20v2H0z"/>
      </svg>
    </button>
    <button class="header__btn header__btn--right" title="Add event">
      <svg class="icon" width="26px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
        <path fill="#fff" d="M416 277.333H277.333V416h-42.666V277.333H96v-42.666h138.667V96h42.666v138.667H416v42.666z"/>
      </svg>
    </button>
  </header>



  <div class="calendar-container">
   
    <h2 class="calendar-container__title">  
  <div id="dateDisplay"></div>   
    </h2>  
    <button id="prevMonth"  class="button-25" role="button">上一個月</button>
    
    <label for="year">年份：</label>
    <select id="year"></select>
    <label for="month">月份：</label>
    <select id="month"></select>
    
    <button id="nextMonth"  class="button-25" role="button">下一個月</button>
 </div>
 

    <table id="calendar"></table>
  
    
    </div>

    
    <script>
   
var table = document.getElementById('calendar');
var yearSelect = document.getElementById('year');
var monthSelect = document.getElementById('month');
var today = new Date();
var selectedDate = null;
var dateDisplay = document.getElementById('dateDisplay');

// 创建年份和月份选项
for (var year = 2001; year <= 2050; year++) {
    var option = document.createElement('option');
    option.value = year;
    option.textContent = year;
    yearSelect.appendChild(option);
}

for (var month = 1; month <= 12; month++) {
    var option = document.createElement('option');
    option.value = month;
    option.textContent = month;
    monthSelect.appendChild(option);
}

// 更新日期显示
function updateDateDisplay() {
    if (selectedDate) {
        dateDisplay.textContent = "已选择日期: " + selectedDate.textContent + "/" + monthSelect.value + "/" + yearSelect.value;
    } else {
        dateDisplay.textContent = "今天日期: " + today.getDate() + "/" + (today.getMonth() + 1) + "/" + today.getFullYear();
    }
}

function generateCalendar(year, month) {
    table.innerHTML = '';

    var date = new Date(year, month - 1, 1);
    var lastDay = new Date(year, month, 0).getDate();

    var weekdays = ['日', '一', '二', '三', '四', '五', '六'];

    var row = document.createElement('tr');
    for (var i = 0; i < 7; i++) {
        var cell = document.createElement('td');
        cell.textContent = weekdays[i];
        row.appendChild(cell);
    }
    table.appendChild(row);

    var day = date.getDay();
    var currentRow = document.createElement('tr');

    for (var i = 0; i < day; i++) {
        currentRow.appendChild(document.createElement('td'));
    }

    for (var i = 1; i <= lastDay; i++) {
        if (day === 7) {
            day = 0;
            table.appendChild(currentRow);
            currentRow = document.createElement('tr');
        }
        var cell = document.createElement('td');
        cell.textContent = i;
        if (year === today.getFullYear() && month === today.getMonth() + 1 && i === today.getDate()) {
            cell.classList.add('today');
        }
        if (selectedDate && year === today.getFullYear() && month === today.getMonth() + 1 && i === today.getDate()) {
            cell.classList.add('selected');
        }
        cell.addEventListener('click', function() {
            var clickedDate = new Date(year, month - 1, parseInt(this.textContent));
            if (selectedDate) {
                selectedDate.classList.remove('selected');
            }
            this.classList.add('selected');
            selectedDate = this;
            updateDateDisplay();
        });
        currentRow.appendChild(cell);
        day++;
    }

    table.appendChild(currentRow);
    updateDateDisplay();
}

yearSelect.addEventListener('change', function() {
    generateCalendar(parseInt(yearSelect.value), parseInt(monthSelect.value));
});

monthSelect.addEventListener('change', function() {
    generateCalendar(parseInt(yearSelect.value), parseInt(monthSelect.value));
});

document.getElementById('prevMonth').addEventListener('click', function() {
    var selectedYear = parseInt(yearSelect.value);
    var selectedMonth = parseInt(monthSelect.value);

    if (selectedMonth === 1) {
        // 如果当前月份是1月，切换到上一年的12月
        yearSelect.value = selectedYear - 1;
        monthSelect.value = 12;
    } else {
        // 否则切换到上一个月
        monthSelect.value = selectedMonth - 1;
    }
    generateCalendar(parseInt(yearSelect.value), parseInt(monthSelect.value));
});

document.getElementById('nextMonth').addEventListener('click', function() {
    var selectedYear = parseInt(yearSelect.value);
    var selectedMonth = parseInt(monthSelect.value);

    if (selectedMonth === 12) {
        // 如果当前月份是12月，切换到下一年的1月
        yearSelect.value = selectedYear + 1;
        monthSelect.value = 1;
    } else {
        // 否则切换到下一个月
        monthSelect.value = selectedMonth + 1;
    }
    generateCalendar(parseInt(yearSelect.value), parseInt(monthSelect.value));
});
// 初始加载当前年份和月份的行事历
yearSelect.value = today.getFullYear();
monthSelect.value = today.getMonth() + 1;
generateCalendar(today.getFullYear(), today.getMonth() + 1);

    </script>

</body>
</html>
